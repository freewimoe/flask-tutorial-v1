{% extends "base.html" %}

{% block title %}Startseite - Flask Tutorial V1{% endblock %}

{% block content %}
<div class="welcome">
    <h1>🏠 Willkommen zum Flask Tutorial!</h1>
    <p>Dies ist die <strong>einfache Version (V1)</strong> für Schüler.</p>
    
    {% if not current_user %}
        <div class="welcome-actions">
            <a href="{{ url_for('register') }}" class="btn btn-primary">Jetzt registrieren</a>
            <a href="{{ url_for('login') }}" class="btn btn-secondary">Schon registriert? Anmelden</a>
        </div>
    {% endif %}
</div>

<div class="posts-section">
    <h2>📝 Neueste Posts</h2>
    
    {% if posts %}
        {% for post in posts %}
            <article class="post-card">
                <h3>{{ post.title }}</h3>
                <div class="post-meta">
                    <span>✍️ Von <a href="{{ url_for('user_profile', username=post.author.username) }}">{{ post.author.username }}</a></span>
                    <span>📅 {{ post.date_posted.strftime('%d.%m.%Y um %H:%M') }}</span>
                </div>
                <div class="post-content">
                    {{ post.content[:200] }}
                    {% if post.content|length > 200 %}...{% endif %}
                </div>
            </article>
        {% endfor %}
    {% else %}
        <div class="no-posts">
            <p>🔍 Noch keine Posts vorhanden.</p>
            {% if current_user %}
                <p><a href="{{ url_for('new_post') }}" class="btn btn-primary">Schreibe den ersten Post!</a></p>
            {% else %}
                <p><a href="{{ url_for('register') }}">Registriere dich</a> um Posts zu schreiben!</p>
            {% endif %}
        </div>
    {% endif %}
</div>
{% endblock %}